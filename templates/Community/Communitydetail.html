<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>무무</title>
    <!--JQuery 관련 CDN Link    -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="../static/CSS/write.css" rel="stylesheet">
    <script>
        function cancel() {
            window.location.href = "/community"
        }
        function update(id) {
            let postTitle = $('#postTitle').val()
            let content = $('#content').val()
            let postId = id;
            $.ajax({
                type: "POST",
                url: "/update",
                data: {postTitle_give: postTitle, content_give: content, postId_give: postId },
                success: function (response) { // 성공하면
                    alert(response["msg"]);
                    window.location.href = "/community"
                }
            })
        }

       function PostDelete(id){
            let postId = id;
            $.ajax({
                type: "POST",
                url: "/delete",
                data: {postId_give: postId },
                success: function (response) { // 성공하면
                    alert(response["msg"]);
                    window.location.href = "/community"
                }
            })
        }
    </script>

</head>
<body>
<div id="header">
</div>

<main>
    <div class="ui_container">

        <div class="ui_border">
            <div class="border_cont">
                <input type="text" value="{{ post[0]['postTitle'] }}" class="inq_field" id="postTitle" style="font-weight : bold;"/>
                 <input type="text" value="{{ post[0]['movieTitle'] }}" class="inq_field" id="movieTitle" style="font-weight : bold;" disabled/>
                <input type="text" value="{{ post[0]['writer'] }}" class="inq_field" id="writer" style="font-weight : bold;" disabled/>
                <textarea name="" id="content" cols="30" rows="10" style="font-weight : bold;">{{ post[0]['content'] }}</textarea>
            </div>
            <div class="btn_area">
                <input type="button" value="저장" onclick="update({{ post[0]['postId'] }})" class="ui_btn btn_inline btn_emph">
                <input type="button" value="취소" onclick="cancel()" class="ui_btn btn_inline">
                <input type="button" value="삭제" onclick="PostDelete({{ post[0]['postId'] }})" class="ui_btn btn_inline btn_emph">
            </div>
            <br>
        </div>
    </div>
</main>


<div id="footer">

</div>

<script>
    $(document).ready(function () {
        $("#header").load("./header");  // 원하는 파일 경로를 삽입하면 된다
        $("#footer").load("./footer");  // 추가 인클루드를 원할 경우 이런식으로 추가하면 된다
    });
</script>
<link rel="script" type="text/html" href="../header.html">
</body>
</html>