<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>무무</title>
    <!--JQuery 관련 CDN Link    -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="../static/CSS/border.css" rel="stylesheet">

    <!-- og(링크설명) 및 falcon(텝사진) -->
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <meta property="og:title" content="MUMU 무시무시한 무서운 영화"/>
    <meta property="og:description" content="mini project for Web Plus"/>
    <meta property="og:image" content="{{ url_for('static', filename='ogimg.png') }}"/>


    <script>
        $(document).ready(function () {
            let id = $('#hiddinInfo').val()

            console.log(id)

            if (id == "" || id == null) {
                $('#newPost').hide()
            } else {
                $('#newPost').show()
            }
        })

        function detail(id) {
            window.location.href = '/communitydetail?id='+id
        }

    </script>

    <style>
        #board {
            table-layout: fixed;
            border-collapse: collapse;
            border: 1px solid #888;

        }
        td {
            text-overflow: ellipsis; /* 위에 설정한 100px 보다 길면 말줄임표처럼 표시합니다. */
            white-space: nowrap; /* 줄바꿈을 하지 않습니다. */
            overflow: hidden; /* 내용이 길면 감춤니다 */
        }

        body {
            background-color: cornsilk;
            min-height: 100vh;
        }

    </style>
</head>
<body>
<div id="header">

</div>

<main>
    <br>
    <button id="newPost" onclick="window.location.href = '/communityWrite'" style="float: right; margin-right: 20%;width: 10%;" >글쓰기</button>
    <h1 class="con">게시글 목록</h1>
    <section class="article-list table-common con">
            <table border="1" id="board"  >
                <thead>
                    <tr>
                        <th>글번</th>
                        <th>영화 제목</th>
                        <th>글 제목</th>
                        <th>작성자</th>

                    </tr>
                </thead>
                <tbody >
                {% for row in post_list %}
                    {% if row["status"] == 0 %}
                    {% set postId = row["postId"] %}
                    {% set movieTitle = row["movieTitle"] %}
                    {% set postTitle = row["postTitle"] %}
                    {% set writer = row["writer"] %}
                    <tr >
                        <td>{{ postId }}</td>
                        <td>{{ movieTitle }}</td>
                        <td onclick="detail({{ postId }})"><a href="#">{{ postTitle }}</a></td>
                        <td>{{ writer }}</td>
                    </tr>
                    {% endif %}
                {% endfor %}
                </tbody>
            </table>
        </div>
    </section>

    <br>
    <br>

    <input type="hidden" value="{{ payload }}" id="hiddinInfo">

</main>


<div id="footer">

</div>

<script>
    $(document).ready(function () {
        $("#header").load("./header");  // 원하는 파일 경로를 삽입하면 된다
        $("#footer").load("./footer");  // 추가 인클루드를 원할 경우 이런식으로 추가하면 된다
    });
</script>
<link rel="script" type="text/html" href="../header.html">
</body>
</html>